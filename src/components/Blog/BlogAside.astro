---
import type { CollectionEntry } from "astro:content";
import type { MarkdownHeading } from "astro";

import BlogAsideHeadings from "./BlogAsideHeadings.astro";
import BlogAsideSeriesItem from "./BlogAsideSeriesItem.astro";

export interface Props {
    headings: MarkdownHeading[];
    series?: CollectionEntry<"blog-series">;
    currentPost: string;
    classList?: string[];
}

const { series, headings, currentPost } = Astro.props;
---

<aside class="sticky top-5">
    <ul>
        {
            series &&
                series.data.posts.map((sp) => (
                    <BlogAsideSeriesItem
                        isCurrent={sp.post.slug === currentPost}
                        url={`/blog/${sp.post.slug}`}
                        label={sp.label}
                    >
                        <BlogAsideHeadings headings={headings} />
                    </BlogAsideSeriesItem>
                ))
        }
        {!series && <BlogAsideHeadings headings={headings} />}
    </ul>
</aside>
